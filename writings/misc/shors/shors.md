# Shor's Algorithm


Suppose we want to factor $N$ into its prime 
factors. The inefficient classical way to do this
is a brute force approach that is exponential.
The most efficient classical algorithm for factoring
numbers is the [general number field sieve](https://en.wikipedia.org/wiki/General_number_field_sieve) that
takes sub-exponential time. Shor's Algorithm is a quantum algorithm that
can do this $\mathcal{O}\left(\left(\log N\right)^3\right)$ where 
N is the size of the integer.

## Shor's Algorithm Classical Part
Shor's algorithm is essentially a classical algorithm which 
requires a quantum approach for one step. In this section
we outline the classical approach.

For this discussion, we will make extensive use of 
Euclid's [greatest common divisor (gcd) algorithm](https://en.wikipedia.org/wiki/Euclidean_algorithm). 
This is efficient and has a logarithmic complexity. 

Suppose we want to factor $N$. Let's start with a guess $a$.
First let's compute $d = \gcd(a,N)$. If $d \neq 1$ we are done
because we guessed luckily and found a divisor $d$ of $N$. 
You can find the other one by doing $\frac{N}{d}$.

Instead assume that $d = 1$, i.e. $a$ and $N$ are coprime
integers. This means that $a$ is an element of the 
multiplicative group of integers modulo $N$, i.e. 
$a\in \left(\mathbb{Z}/N\mathbb{Z}\right)^{\times}$.

Now consider $\langle a \rangle$ the subgroup of $\left(\mathbb{Z}/N\mathbb{Z}\right)^{\times}$ generated by $a$

$$\langle a \rangle = \{a^k | a\in \left(\mathbb{Z}/N\mathbb{Z}\right)^{\times}, k \in \mathbb{Z}\}$$

This is a subgroup of the multiplicative group and so $a$ has an order
$r$ which is the smallest integer such that $a^r = 1 \mod N$.
For now suppose by magic you know what this $r$ is. This is the part that will
require a quantum algorithm to do efficiently, which we will 
discuss later.

The statement $a^r = 1 \mod N$ means that $a^r - 1$ is divisible
by $N$. Let's factorise this into $\left(a^{\frac{r}{2}} + 1\right)\left(a^{\frac{r}{2}} - 1\right)$. Note that if $r$ was
an odd number, $\frac{r}{2}$ will not be an integer so we have to 
restart with a different guess of $a$.

Does $N$ divide 
either of these factors? Suppose $N$ divides $\left(a^{\frac{r}{2}} - 1\right)$. That means $a^{\frac{r}{2}} = 1 \mod N$ which cannot be
true since $r$ was already the smallest integer such that 
$a^r = 1 \mod N$. Let's consider instead whether $N$ divides $a^{\frac{r}{2}} + 1$. More precisely, let's compute
$x = \gcd\left(a^{\frac{r}{2}} + 1, N\right)$. If $x = 1$, there
is no common divisor and this was a bad guess wo we need a different 
guess for $a$. Suppose instead that $x \neq 0$, this means that $x$
divides $N$, and we have found a divisor (and the other divisor $\frac{N}{x}$) and we are done. 

Based on the above argument/proof, the (incomplete) algorithm
to factor $N$ is as follows:
